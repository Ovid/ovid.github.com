#!/usr/bin/env perl

# vim: ft=perl
use lib 'lib';
use strict;
use warnings;
use Getopt::Long;
GetOptions(
    \my %options,
    'for_release',
    'notest',
) or die "bad options";

use Ovid::Site;

my $site = Ovid::Site->new( for_release => $options{for_release} );
$site->build;

system( 'prove', '-l', 't' ) unless $options{notest};
exit 0;

__END__

=head1 NAME

rebuild - Rebuilds site

=head1 DESCRIPTION

=over 4

=item * Preprocesses files (such as adding TOCs and TAGS)

=item * Runs C<ttree>

=item * Runs all tests

=item * Rebuilds article pagination

=back
